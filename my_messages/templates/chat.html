{% extends 'generic/base.html' %}

{% load staticfiles %}

{% block content %}
<p id='id_username' hidden>{{ username }}</p>
<div class='chat-container row'>
    <div id="chat-container" class="col-12 px-5">
        {% for message in messages %}
            {% if message.sender == user %}
                <div class="row mt-1 justify-content-end">
                    <div class="col-10 col-md-8 me message-bubble bg-green">
                        <p><b>{{ message.sender.username }}</b></p>
                        <p>{{ message.message }} </p>
                    </div>
                </div>
            {% else %}
                <div class="row mt-1 justify-content-start">
                    <div class="col-10 col-md-8 other message-bubble bg-blue">
                        <p><b>{{ message.sender.username }}</b></p>
                        <p>{{ message.message }}</p>
                    </div>
                </div>
            {% endif %}
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block chat_footer %}
    <div class="message-box clearfix container">
        <div class="row">
            <div class="col-10 col-md-11 px-1">
            <form id="id_form_msg_box">
                <textarea name="message-to-send" class="px-2 py-1" id="id_msg_box" placeholder ="Type your message" rows="3" resize="none"></textarea>
            </form>
            </div>
            <div class="col-2 col-md-1 align-middle pt-4">
                <button type='submit' form='id_form_msg_box' class="btn"><i class="material-icons text-center text-primary">send</i></button>
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
<script src="{% static 'js/script.js' %}"></script>
<script src={% static 'js/chat.js' %}></script>
{% endblock %}