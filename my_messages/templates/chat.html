{% extends 'generic/base.html' %}

{% load staticfiles %}

{% block content %}

<!--- Make invite form appear as modal -->

<a class='waves-effect waves-light btn-floating green modal-trigger right fixed' href='#invite-modal'>
    <i class='material-icons white-text'>add</i>
</a>

<div id='invite-modal' class='modal'>
    <div class='modal-content'>
        <h4> Invite by Username</h4>
        <form id='invite-form' method='post' action='/invites/'>
            {% csrf_token %}
            <input type='hidden' value={{league_name}} name='league_name'/>
            <input type='text' name='username' placeholder='Username to invite'/>
        </form>
    </div>
    <div class='modal-footer'>
        <button class='btn-flat modal-action modal-close'>Cancel</button>
        <input type='submit' form='invite-form' class='btn-flat modal-action modal-close' value='Invite' />
    </div>
</div>

<!--- Invite modal ends here -->



<p id='id_username' hidden>{{ username }}</p>

<div class='container'>

<form id='id_form_msg_box'>
    <div class='input-field row'>
        <input class='col s10' id='id_msg_box' type='text' autocomplete='off'/>
        <div class='col s2'> 
            <button type='submit' class='btn-floating waves-effect waves-light green'>
                <i class='material-icons'>send</i>
            </button>
        </div>
    </div>
</form>

<div class='chat-container'>

<div id='id_chat' class='row'>
    {% for message in messages %}
    {% if message.sender == user %}
        <div class='col s8 push-s4 z-depth-1 message-bubble me grey lighten-2'>
    {% else %} 
        <div class='col pull-s0 s8 z-depth-1 message-bubble other cyan darken-4 white-text'>
    {% endif %}
            <p><b> {{ message.sender.username }}</b><p>
            <p> {{message.message }}</p>
        </div>
    {% endfor %}
</div>
</div>

<!---
<ul class='collection' id='id_chat'>
    {% for message in messages %}
    <li class='collection-item avatar'>
        <i class='material-icons circle'>person</i>
        <span class='title black-text'><b>{{ message.sender.username }}</b></span>
        <p>{{ message.message }}</p>
        <a class='secondary-content'>{{ message.timestamp }}</a>
    </li>
    {% endfor %}
</ul>
--->
</div>
{% endblock %}


{% block scripts %}
<script src="{% static 'js/script.js' %}"></script>
<script src={% static 'js/chat.js' %}></script>
{% endblock %}
